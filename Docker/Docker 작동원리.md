## Docker 동작 원리

##### Container란

> 컨테이너란 어플리케이션이 **동작하기 위해서 필요한 요소** (실행 파일, 애플리케이션 엔진 등) 을 패키지화하고 격리하는 기술을 말합니다.



#### Docker란

> **리눅스 컨테이너 기술을 기반**으로 하는 오픈 소스 소프트웨어 플랫폼입니다.



## Docker Container VS 가상머신 (VM)

#### VM

> 하이퍼바이저를 이용해 여러개의 Guest OS를 하나의 Host OS에서 생성해 사용하는 방식입니다.
>
> 각 게스트 운영체제는 다른 게스트 운영체제와는 **완전히 독립된 공간과 시스템 자원**을 할당받아 사용합니다.
>
> **단점**
>
> > 각종 시스템 자원을 가상화하고 독립된 공간을 생성하는 작업은 **하이퍼바이저를 반드시 거치기 때문에** 일반 호스트에 비해 **성능의 손실이 발생**합니다. 
> >
> > OS 위에 OS가 있기 때문에 속도 저하가 일어난다.
> >
> > 사용하는 컴퓨터의 리소스를 분할하여 사용하여, 속도 저하가 일어날 수 있다.
> >
> > 문제가 생기는 경우 운영체제부터 리부팅을 진행해야 하기 때문에 복구 시간이 오래 걸린다.



#### Docker Container

> 도커 컨테이너는 **가상화된 공간을 생성하기 위해** 리눅스 자체 기능인 chroot, 네임스페이스, cgroups을 사용함으로써 **프로세스 단위의 격리 환경**을 만들기 때문에 **성능 손실이 거의 없습니다.** (독립적)
>
> > ex) Java Container, Phyon Container, JavaScript Container 등등.. 다양한 독립적인 컨테이너로 사용 가능
>
> 가상화된 공간을 사용할 때의 성능 손실이 거의 없습니다.
>
> 컨테이너에 필요한 커널은 호스트os의 커널을 공유해 사용합니다.
>
> **컨테이너 안**에는 **애플리케이션을 구동하는데 필요한 라이브러리 및 실행 파일만 존재**하기 때문에 컨테이너를 이미지로 만들 때 이미지 **용량** 또한 가상머신에 비해 **대폭 줄어듭니다.**
>
> chroot
>
> > 호스트의 루트가 아닌 Root 디렉토리를 변경하는 기능
>
> 네임스페이스
>
> > 컨테이너별로 서로가 충돌하지 않도록 하는 기능
> >
> > 독립적인 프로세스 공간을 할당하거나 네트워크 충돌을 방지하는 기능 등
>
> cgroups
>
> > 자원에 대한 제어를 가능하게 해주는 기능
> >
> > CPU, 메모리, I/O, 네트워크

<img src="image/docker 작동.png" alt="플랜잇_로고" />



> **VM**은 OS위에 OS를 사용함으로써 독립적인 환경을 만들 수 있지만 무겁고 성능 문제가 발생할 수 있습니다.
>
> **Docker Container**는 Docker Engine 위에서 컨테이너 단위(프로세스 단위)로 독립적인 환경을 만들 수 있기 때문에 VM보다 경량화 되어 있고, 성능 손실이 거의 없습니다.
>
> 프로세스 단위 : 운영체제로부터 자원을 할당 받는 작업 단위