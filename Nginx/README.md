## 서버와 클라이언트

클라이언트 → 서버 (요청) **request**

클라이언트 ← 서버 (응답) **response**



#### HTTP 프로토콜

> HTTP란 **웹서버와 웹클라이언트**가 서로 **정보를 주고 받기** 위한 **약속(프로토콜)**이다. 
>
> **응답**은 어떻게 해야하는지에 대한 규칙을 미리 정해둔 것
>
> 

#### Web Server

![Basic representation of a client/server connection through HTTP](https://mdn.mozillademos.org/files/8659/web-server.svg)

> **웹 서버**는 **HTTP Server**라고도 부른다.
>
> 웹 브라우저와 같은 **클라이언트로부터 HTTP 요청을 받아**들이고,  HTML 문서와 같은 **웹 페이지를 반환**하는 **컴퓨터 프로그램**입니다.
>
> 웹 페이지를 클라이언트(웹브라우저)로 전달하는 것이다. 주로 CSS, JS, 이미지를 포함한 HTML 문서가 클라이언트로 전달된다.
>
> Apache와 Nginx 등이 있다.

## Nginx

> Nginx는 규모가 작은 서비스이면서 데이터 처리가 많은 서비스에 적합하다.



#### Nginx의 역할

1 - 1. 정적 파일을 처리하는 **HTTP 서버**로서의 역할

> **웹서버의 역할**은 **HTML, CSS,  Javascript, 이미지**와 같은 정보를 **웹 브라우저(크롬 등)에 전송**하는 역할을 한다.



1 - 2. 응용프로그램 서버에 요청을 보내는 **리버스 프록시**로서의 역할

> Nginx가 리버스 프록시의 역할을 한다.



location과 proxy_pass

> location에 작성한 URL 경로를 통해 들어온 요청을 proxy_pass에 작성한 서버로 전환한다.



## Proxy 서버란?

> 클라이언트와 서버간의 **중계 서버**로 **통신을 대리 수행**하는 서버이다.
>
> 캐시 / 보안 / 트래픽 분산 (로드밸런싱) 등 여러 장점이 있다.



#### Forward Proxy

> **클라이언트 대신** 서버에 요청을 보내준다.
>
> **1. 캐싱기능**
>
> * ex) 1번 클라이언트가 오늘 날씨 어때? 라고 요청했을 때 서버에서 비온다는 응답을 보내준다. Forward Proxy는 그 요청과 응답을 저장해두고 2번 클라이언트가 오늘 날씨 어때? 라고 요청했을 때 서버까지 거치지 않고 응답을 할 수 있다.
>
> * 전송 시간이 절약된다.
>
> **2. 익명성**
>
> * 클라이언트가 요청했지만 Forward Proxy가 요청한 것처럼 서버에 Forward Proxy의 정보를 주게됨
> * 서버가 응답 받은 요청을 누가 보냈는지 알지 못하게 함

![img](https://www.lesstif.com/system-admin/files/21430345/21561365/1/1405440454000/image2014-7-16+0%3A54%3A40.png)

#### Reverse Proxy

> **서버의 응답을 대신** 클라이언트에게 전달해준다.
>
> **1. 캐싱 기능** (Forward Proxy와 동일)
>
> **2. 보안**
>
> * 서버 정보를 클라이언트로부터 숨길 수 있다.
> * 클라이언트는 Reverse Proxy를 실제 서버라고 생각하여 요청
> * 실제 서버의 IP가 노출되지 않음
>
> **3. 로드밸런싱**
>
> * 선택사항이다.
> * 부하분산
>
> 

[![img](https://www.lesstif.com/system-admin/files/21430345/21561366/1/1405440454000/image2014-7-16+0%3A58%3A45.png)](https://www.lesstif.com/system-admin/files/21430345/21561366/1/1405440454000/image2014-7-16+0%3A58%3A45.png)



## Nginx와 Apache 비교

#### Apache

> Apache서버는 **요청 하나 당 프로세스(또는 스레드)가 처리하는 구조**입니다.
>
> 요청이 많을수록 CPU와 메모리 사용이 증가하기 때문에 성능 저하가 있을 수 있습니다.



#### Nginx

> **비동기 이벤트 기반**으로 요청을 처리합니다.
>
> 적은 수의 쓰레드로 효율적인 일처리를 하며, 쓰레드를 적게 사용하기 때문에 쓰레드당 할당되는 메모리도 적게 사용하는 구조입니다.
>
> 모듈 개발이 어려우며 다양한 모듈이 없다는 단점이 있습니다.

최근 대량 접속에도 적은 리소스를 사용하며 빠르게 서비스를 할 수 있는 웹사이트가 각광 받게 되었고 Nginx가 관심을 받기 시작했습니다.

